<!DOCTYPE html>
<html>
<head>
  <title>Threat Intel Visualizer</title>

  <!-- Load external background and title styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bg.css') }}?v=2">

  <style>
    :root{
      --ink:#e8f1ff;
      --card-bg:rgba(255,255,255,0.96);
      --nav-bg:rgba(15,30,45,0.92);
    }
    html,body{height:100%}
    body{
      font-family:Arial, sans-serif;
      margin:0;
      background-color:#0b1b2b;
      color:#1b2a3a;
    }

    /* Background layers */
    #bg-world{
      position:fixed; inset:0; z-index:-4;
      background:url("{{ url_for('static', filename='img/world-bg.jpg') }}") center/cover no-repeat fixed;
      background-color:#091521; /* fallback */
    }
    #bg-veil{
      position:fixed; inset:0; z-index:-3;
      background:linear-gradient(180deg, rgba(7,17,33,.85), rgba(7,17,33,.65) 40%, rgba(7,17,33,.85));
      pointer-events:none;
    }
    #bg-particles {
        position: fixed;
        inset: 0;
        z-index: -1;  /* behind content */
        background:
          radial-gradient(700px 500px at 15% 20%, rgba(5, 120, 255, .08), transparent 60%),
          radial-gradient(800px 600px at 85% 80%, rgba(0, 200, 255, .06), transparent 60%),
          #071524;
    }

    /* Navbar */
    nav{
      background:var(--nav-bg);
      padding:12px 16px;
      position:sticky; top:0; z-index:5;
      backdrop-filter:blur(6px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    nav a{
      color:var(--ink); text-decoration:none; margin-right:15px; font-weight:bold;
    }
    nav a:hover{text-decoration:underline;}

    /* Page layout */
    .container{
      padding:24px 20px 40px;
      max-width:1100px;
      margin:0 auto;
      position:relative;
      z-index:1;
    }

    /* Content cards */
    .summary-card,.section{
      background:var(--card-bg);
      padding:20px;
      margin-bottom:30px;
      border-radius:10px;
      box-shadow:0 8px 30px rgba(7,21,36,.25);
      border:1px solid rgba(7,21,36,.08);
    }
    table{width:100%; border-collapse:collapse; margin-top:10px;}
    th,td{padding:10px; border-bottom:1px solid #dfe6f3; text-align:left;}
    .no-data{color:#6b7a90;}
    .score-high{color:#e74c3c;} .score-medium{color:#f39c12;} .score-low{color:#2ecc71;}
    ul{padding-left:20px;}

    /* Search / form controls */
    .search-row{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:14px;
    }
    input[type="text"], input[type="search"]{
      padding:10px 12px;
      border:2px solid #cbd5e1;
      border-radius:6px;
      background:#fff;
      color:#111827;
      font-size:14px;
      outline:none;
    }
    input[type="text"]:focus{
      border-color:#2aa7ff;
      box-shadow:0 0 0 3px rgba(42,167,255,.25);
    }
    button, input[type="submit"]{
      padding:10px 14px;
      background:#2c3e50;
      color:#fff;
      border:none;
      border-radius:6px;
      cursor:pointer;
      font-weight:600;
    }
    button:hover, input[type="submit"]:hover{
      background:#1a252f;
    }
  </style>
</head>
<body>
  <div id="bg-world"></div>
  <div id="bg-veil"></div>
  <div id="bg-particles"></div>

  <nav>
    <a href="/">üîç Scan</a>
    <a href="/history">üìú History</a>
    <a href="/visualize">üìä Visualize</a>
  </nav>

  <div class="container">
    {% block content %}{% endblock %}
  </div>

  <!-- tsParticles (keep these two) -->
<script src="https://cdn.jsdelivr.net/npm/tsparticles-engine@2/tsparticles.engine.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>

<!-- Init: stronger particles -->
<script>
(async () => {
  if (!window.tsParticles) return;
  await tsParticles.load({
    id: "bg-particles",
    options: {
      fpsLimit: 60,
      detectRetina: true,
      particles: {
        number: { value: 90, density: { enable: true, area: 1000 } },
        color: { value: ["#2aa7ff", "#29e6ff"] },
        size:  { value: { min: 1, max: 3 } },
        opacity:{ value: 0.5 },
        links:  { enable: true, distance: 120, opacity: 0.35, width: 1, color: "#2aa7ff" },
        move:   { enable: true, speed: 1.0, outModes: "out" }
      },
      interactivity: {
        events: { onHover: { enable: true, mode: "repulse" }, resize: true },
        modes:  { repulse: { distance: 90, duration: 0.25 } }
      }
    }
  });
})();
</script>
</body>
</html>


